<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Halloween WebXR Experience</title>
  <style>
    body { margin: 0; overflow: hidden; background-color: #000; }
    #info { position: absolute; top: 10px; width: 100%; text-align: center; color: #fff; z-index: 1; }
  </style>
</head>
<body>
  <div id="info">
    <h1>ðŸŽƒ Halloween WebXR Experience ðŸ‘»</h1>
    <p>Enter VR to explore the spooky environment!</p>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/webxr/VRButton.js"></script>
  <script>
    // Scene, Camera, Renderer
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 1.6, 3); // Typical VR height

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.xr.enabled = true;
    document.body.appendChild(renderer.domElement);

    // Add VR Button
    document.body.appendChild(THREE.VRButton.createButton(renderer));

    // Lighting
    const ambientLight = new THREE.AmbientLight(0x404040, 2); // Soft white light
    scene.add(ambientLight);

    const pointLight = new THREE.PointLight(0xff6600, 1, 100);
    pointLight.position.set(5, 10, 7.5);
    scene.add(pointLight);

    // Ground
    const groundGeometry = new THREE.PlaneGeometry(100, 100);
    const groundMaterial = new THREE.MeshStandardMaterial({ color: 0x222222 });
    const ground = new THREE.Mesh(groundGeometry, groundMaterial);
    ground.rotation.x = - Math.PI / 2;
    ground.position.y = 0;
    scene.add(ground);

    // Halloween Pumpkin
    const pumpkinGeometry = new THREE.SphereGeometry(0.5, 32, 32);
    const pumpkinMaterial = new THREE.MeshStandardMaterial({ color: 0xffa500 });
    const pumpkin = new THREE.Mesh(pumpkinGeometry, pumpkinMaterial);
    pumpkin.position.set(0, 0.5, -2);
    scene.add(pumpkin);

    // Pumpkin Face (using simple geometry)
    const faceMaterial = new THREE.MeshStandardMaterial({ color: 0x000000 });
    
    // Eyes
    const eyeGeometry = new THREE.SphereGeometry(0.05, 16, 16);
    const leftEye = new THREE.Mesh(eyeGeometry, faceMaterial);
    leftEye.position.set(-0.15, 0.1, 0.45);
    pumpkin.add(leftEye);

    const rightEye = new THREE.Mesh(eyeGeometry, faceMaterial);
    rightEye.position.set(0.15, 0.1, 0.45);
    pumpkin.add(rightEye);

    // Mouth
    const mouthGeometry = new THREE.BoxGeometry(0.3, 0.05, 0.05);
    const mouth = new THREE.Mesh(mouthGeometry, faceMaterial);
    mouth.position.set(0, -0.2, 0.45);
    pumpkin.add(mouth);

    // Ghost (Simple Plane with Transparent Texture)
    const ghostGeometry = new THREE.PlaneGeometry(1, 1);
    const ghostTexture = new THREE.TextureLoader().load('https://i.imgur.com/8I6bXwK.png'); // Replace with your ghost image URL
    const ghostMaterial = new THREE.MeshBasicMaterial({ map: ghostTexture, transparent: true });
    const ghost = new THREE.Mesh(ghostGeometry, ghostMaterial);
    ghost.position.set(2, 1, -3);
    ghost.rotation.y = Math.PI / 4;
    scene.add(ghost);

    // Animation Loop
    function animate() {
      renderer.setAnimationLoop(render);
    }

    function render() {
      // Rotate the pumpkin
      pumpkin.rotation.y += 0.005;

      // Move the ghost up and down
      ghost.position.y = 1 + Math.sin(Date.now() * 0.002) * 0.5;

      renderer.render(scene, camera);
    }

    animate();

    // Handle Window Resize
    window.addEventListener('resize', onWindowResize, false);

    function onWindowResize(){
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }
  </script>
</body>
</html>
